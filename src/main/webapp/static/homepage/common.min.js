var opflag=0; //左侧导航隐藏图标点击标记

//控制主体框宽度
function resetW(){
	var fxw;
	if(opflag==1)
	{
	fxw=document.documentElement.scrollWidth-5;
	}
	else
	{
    fxw=document.documentElement.scrollWidth-166;
	}
	document.getElementById("rframe").style.width=fxw+'px';
}

//左边栏，导航选中时，样式变化效果
$(function(){
	    $.each($(".menu_wrap li"), function(){
			$(this).click(function(){
				if($(this).hasClass("title")) return;
				$(".menu_wrap li").not($(this)).removeClass("curr");
				$(this).addClass("curr");
			});
		});
	


//隔行变色 
 $(".list_table tbody tr,.list-d-table tbody tr").addClass("odd");
 $(".list_table  tbody tr:even,.list-d-table tbody tr:even").addClass("even");
 
$(".list_table tbody tr,.list-d-table tbody tr").mouseover(function(){$(this).addClass("on")})
$(".list_table tbody tr,.list-d-table tbody tr").mouseout(function(){$(this).removeClass("on")});
 
	$(".btn").mouseover(function(){
		$(this).removeClass('click').addClass('on');
	}).mouseout(function(){
		$(this).removeClass('on');
	});
	
	$(".search .txt a").click(function(event)
	{
		if($('#searchShow').hasClass('pop'))
		{
		$('#searchShow').attr('class', 'more');
		$(".search .txt a").html('关闭');
		}
		else
		{
		$('#searchShow').attr('class', 'pop');
		$(".search .txt a").html('高级搜索');
		}
		event.stopPropagation(); //取消事件冒
	});
	
	$("#searchShow").click(function(event)
	{
		event.stopPropagation(); //取消事件冒
	});
	
	//全选、反选
	$(".list_table #chkall").click(function()
	{
		$(".list_table input:checkbox").attr("checked",$(this).attr("checked"));
	});
	
	
	$(".sku span").click(function(){
		if($(this).hasClass("curr"))
		$(this).removeClass("curr");
		else
		$(this).addClass("curr");
	})

//设置表单元素样式
	$('.com_modi_table input[type=text],.com_modi_table input[type=password]').addClass('g-ipt');
	$('.com_modi_table select[type=single]').addClass('g-select');
	$('.toolbar input[type=text],.add_detail_box input[type=text]').addClass('inputtxt');
	$('.toolbar select,.add_detail_box select').addClass('selecttxt');
	
	
	
	$(".list_table tbody tr td input[type=checkbox]").click(function(){
		if($(this).attr("checked"))
		$(this).parent().parent().addClass("check");
		else
		$(this).parent().parent().removeClass("check");	
	})
	
	
	$(".list_table thead tr th input[type=checkbox]").click(function(){
		
		if($(this).attr("checked")){
			$(".checkall").attr("checked","true");
			$(".check-box").attr("checked","true");
			$(".check-box").parent().parent().addClass("check");
			$('.list_table tbody tr').addClass("check");
			}			
		else {
			$(".check-box").removeAttr("checked");
			$(".check-box").parent().parent().removeClass("check");
			$('.list_table tbody tr').removeClass("check");
			$(".checkall").removeAttr("checked");
			}							  							  
			})		  

		//单个checkbox选中背景变色
		$(".check-box").click(function(){	
		if($(this).attr("checked")){									   
		$(this).parent().parent().addClass("check");	
		}
		else {
		$(this).parent().parent().removeClass("check");	
		}
		});
	
	setTimeout(function(){$(".tbox").height($(".tbox").height()+30);},1000);
    	
});


//点击空白区域隐藏高级搜索
$(document).click(function(event)
{
	$('#searchShow').attr('class', 'pop');
	$(".search .txt a").html('高级搜索');
	});




/*返回*/
function goback() {
	history.back();
	}

/*跳转*/
function gotolink(url){
	location.href=url;
	}

/*文字内容提示显示，如：备注，详情等等，调用样式：.seemark */

		   $(".seemark").mouseover(function(){
		   $(this).find(".markcontent").show();
		   }).mouseout(function(){
		   $(this).find(".markcontent").hide();
		   });
		   $(".seemark").click(function(){
									$(this).parent().find(".markcontent").hide();
										});
		 


//操作提示
function doinfo(msg,flag)
{
	var html="";
	if(flag==1)//成功信息
	{
		html="<div id='InfoDiv' class='sucess-info'>"+msg+"</div>"
	}
	if(flag==null || flag==0 || flag=="")//失败信息
	{
		html="<div id='InfoDiv' class='err-info'>"+msg+"</div>"
	}
	$("body").append(html);
	$('#InfoDiv').animate({top:parent.document.documentElement.scrollTop+5},10);
	$('#InfoDiv').fadeIn(500);
	setTimeout('outInfoDiv()',3000);
}

//退出操作提示
function outInfoDiv()
{
	$('#InfoDiv').fadeOut(500)
	setTimeout('delInfoDiv()',1000);
}
//移除操作提示
function delInfoDiv()
{
	$('#InfoDiv').remove()
	
}
//操作提示随滚动条滚动
$(window).scroll(function()
{	
	var div=parent.$("#rframe").contents().find("#InfoDiv")
	$(div).animate({top:$(document).scrollTop()+5},10) 
});




//高级搜索控制
function controlDiv()
{
	if($(".advice").text()=="高级搜索")
	{
	$("#div-suppersear").slideDown(500);
	$(".advice").html("普通搜索");
	}
	else
	{
	$("#div-suppersear").slideUp(500);
	$(".advice").html("高级搜索");
	}
}

//关闭弹出的页面
function closepage()
{
window.opener=null;
window.open('','_self');
window.close();
}



$('.menu_wrap ul li ul li span.tree-title').click(function()
{
if(parent.$('#lframe').attr('src').split('?')[1].split('=')[1]=="root-12")
{
parent.$('html, body').animate({scrollTop: '0px'});//滚动到顶部 
parent.$('#rframe').hide();
parent.$('#load').show();
}
});


$('.page a').click(function(){
	if(typeof($(this).attr("href"))!="undefined")
	{
		loadListTable();
	}
})

//列表加载等待
function loadListTable()
{
	try
	{
	var maskdiv=$('<div>');
	var maskload=$('<div>');
	$(maskdiv).css({'position':'absolute','background':'#fff','filter':'alpha(opacity=100)','opacity':'1','margin-top':'30px'})
	var loadTop=$('.list_table').offset().top+$('.list_table').height()/2+10;
	var loadLeft=$('.list_table').offset().left+$('.list_table').width()/2+10
	$(maskload).css({'position':'absolute','z-index':'1000','top':loadTop,'left':loadLeft})
	$(maskload).html('<img src=/static/style/images/layout/blue-loading.gif /> loading');
	$(maskdiv).height($('.list_table').height()-10)
	$(maskdiv).width($('.list_table').width())
	$('.list_table').before(maskdiv).before(maskload);
	}catch(error){}
}

//页面加载等待
function addLoadEvent(func) {
  var oldonload = window.onload;
  if (typeof window.onload != 'function') {
    window.onload = func;
  } else {
    window.onload = function() {
      if (oldonload) {
        oldonload();
      }
      func();
    }
  }
}

function overWeb() {
parent.$('#load').hide();
parent.$('#rframe').show();
}
$(function(){addLoadEvent(overWeb);})